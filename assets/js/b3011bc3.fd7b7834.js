"use strict";(self.webpackChunkintroduction_to_programming=self.webpackChunkintroduction_to_programming||[]).push([[1880],{6466:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"bash/loop","title":"Looping in Bash","description":"There are four types of loops in bash:","source":"@site/docs/07-bash/14-loop.md","sourceDirName":"07-bash","slug":"/bash/loop","permalink":"/OPS102/bash/loop","draft":false,"unlisted":false,"editUrl":"https://github.com/Seneca-ICTOER/OPS102/tree/main/docs/07-bash/14-loop.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{},"sidebar":"courseNotesSidebar","previous":{"title":"Bash Example Scripts","permalink":"/OPS102/bash/bash-examples"},"next":{"title":"Windows vs. Linux Scripting","permalink":"/OPS102/cmd/cmd-vs-bash"}}');var o=s(4848),i=s(8453);const r={},a="Looping in Bash",l={},h=[{value:"for VARIABLE in LIST",id:"for-variable-in-list",level:2},{value:"The &quot;C-style&quot; for loop: for (( ; ; ))",id:"the-c-style-for-loop-for----",level:2},{value:"while EXPR",id:"while-expr",level:2},{value:"until EXPR",id:"until-expr",level:2},{value:"tput Colour Codes",id:"tput-colour-codes",level:2},{value:"Number-Guessing Game",id:"number-guessing-game",level:2}];function c(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"looping-in-bash",children:"Looping in Bash"})}),"\n",(0,o.jsx)(n.p,{children:"There are four types of loops in bash:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"for *VARIABLE* in *LIST*"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"for (( ; ; ))"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"while *EXPR*"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"until *EXPR*"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In every case, the actual body of the loop is contained within ",(0,o.jsx)(n.em,{children:"do"})," ...\n",(0,o.jsx)(n.em,{children:"done"})," keywords."]}),"\n",(0,o.jsx)(n.h2,{id:"for-variable-in-list",children:"for VARIABLE in LIST"}),"\n",(0,o.jsxs)(n.p,{children:["This type of loop iterates through a list of values; the ",(0,o.jsx)(n.em,{children:"VARIABLE"})," is\nsequentially set to the each of the items in the list of values and the\nbody of the loop is executed for each value. The list of values may be\nconstants:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"for\xa0X\xa0in\xa01\xa02\xa03\ndo\n\xa0\xa0...\xa0body\xa0of\xa0the\xa0loop\xa0...\ndone\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"for\xa0COLOUR\xa0in\xa0red\xa0green\xa0blue\ndo\n\xa0\xa0...\xa0body\xa0of\xa0the\xa0loop\xa0...\ndone\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Or the list may be the list of parameters (arguments to the script),\nwritten as ",(0,o.jsx)(n.code,{children:'"$@"'}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'for\xa0A\xa0in\xa0"$@"\ndo\n\xa0\xa0...\xa0body\xa0of\xa0the\xa0loop\xa0...\ndone\n'})}),"\n",(0,o.jsx)(n.p,{children:"The most common use of this type of loop may be one or more globbing patterns (filename patterns with wildcard characters), which will be replaced with a list of all matching filenames:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"for\xa0SOURCEFILE\xa0in\xa0*.c\ndo\n\xa0\xa0...\xa0body\xa0of\xa0the\xa0loop\xa0...\ndone\n"})}),"\n",(0,o.jsxs)(n.p,{children:["One thing to remember with this last form of the loop is that ",(0,o.jsx)(n.em,{children:"if the pattern does not match any file"})," then the pattern itself will be assigned to the variable. For example, in the example above, if there are no files that match the pattern ",(0,o.jsx)(n.code,{children:"*.c"})," then the variable SOURCEFILE will be set to the actual pattern: ",(0,o.jsx)(n.code,{children:"SOURCEFILE=*.c"})]}),"\n",(0,o.jsx)(n.p,{children:"This can be used in various ways. For example, this loop will compile all of the C source files found in the current directory:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'for\xa0SOURCEFILE\xa0in\xa0*.c\ndo\n\xa0\xa0echo\xa0"===\xa0Compiling\xa0$SOURCEFILE\xa0==="\n\xa0\xa0\n\xa0\xa0#\xa0This\xa0next\xa0line\xa0removes\xa0the\xa0extension\xa0from\xa0the\xa0filename\n\xa0\xa0BINARY="$(echo\xa0$SOURCEFILE\xa0|\xa0cut\xa0-d.\xa0-f1)"\n\xa0\xa0\n\xa0\xa0gcc\xa0SOURCEFILE\xa0-o\xa0$BINARY\ndone\n'})}),"\n",(0,o.jsxs)(n.p,{children:["(It's also possible to generate the ",(0,o.jsx)(n.code,{children:"LIST"})," in other ways -- for example, from the output of another command, captured with ",(0,o.jsx)(n.code,{children:"$( )"})," )"]}),"\n",(0,o.jsx)(n.h2,{id:"the-c-style-for-loop-for----",children:'The "C-style" for loop: for (( ; ; ))'}),"\n",(0,o.jsxs)(n.p,{children:['This loop is very similar to the "for" loop available in the C language. The C parenthesis are changed to bash double-parenthesis, to invoke the bash arithmetic syntax, and the curly-braces ',(0,o.jsx)(n.code,{children:"{ }"})," used in C are replaced by the bash ",(0,o.jsx)(n.em,{children:"do"})," and ",(0,o.jsx)(n.em,{children:"done"})," keywords. The three arguments in the double-parenthesis are the initial condition (variable\ninitialization), the control condition (an expression that, while true, causes the loop to continue), and the increment/decrement (an expression which is executed at the end of each loop, which typically increments or decrements a counter)."]}),"\n",(0,o.jsx)(n.p,{children:"For example, this loop counts from 1 to 10:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"for\xa0((\xa0i=0;\xa0i<=10;\xa0i++\xa0))\ndo\n\xa0\xa0echo\xa0$i\ndone\n"})}),"\n",(0,o.jsx)(n.h2,{id:"while-expr",children:"while EXPR"}),"\n",(0,o.jsxs)(n.p,{children:["This loop continues as long as the expression ",(0,o.jsx)(n.em,{children:"EXPR"})," is true:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'while\xa0[[ "$A" == "$B" ]]\ndo\n\xa0\xa0...\xa0body\xa0of\xa0the\xa0loop\xa0...\ndone\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.em,{children:"EXPR"})," may be any single bash command, or a list of bash commands separated by newline characters (ENTER key) or semicolons, or a pipeline of commands. Most commonly it is a ",(0,o.jsx)(n.code,{children:"test"})," ",(0,o.jsx)(n.code,{children:"[[  ]]"})," command."]}),"\n",(0,o.jsx)(n.h2,{id:"until-expr",children:"until EXPR"}),"\n",(0,o.jsxs)(n.p,{children:["This loop continues as long as the expression ",(0,o.jsx)(n.em,{children:"EXPR"})," is false:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'until\xa0[[ "$X" -gt "$Y" ]]\ndo\n\xa0\xa0...\xa0body\xa0of\xa0the\xa0loop\xa0...\ndone\n'})}),"\n",(0,o.jsxs)(n.p,{children:["This loop will continue as long as ",(0,o.jsx)(n.code,{children:"$X"})," is less than or equal to ",(0,o.jsx)(n.code,{children:"$Y"})," -- as soon as the expression becomes true (when ",(0,o.jsx)(n.code,{children:"$X"})," is greater than ",(0,o.jsx)(n.code,{children:"$Y"}),"), the loop will stop."]}),"\n",(0,o.jsx)(n.h1,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(n.p,{children:"Here are a few bash scripting examples that include loops:"}),"\n",(0,o.jsx)(n.h2,{id:"tput-colour-codes",children:"tput Colour Codes"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.em,{children:"tput"})," command outputs terminal codes to stdout to perform actions\nsuch as setting the text colour, clearing the screen, and so forth."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsxs)(n.em,{children:["tput setaf ",(0,o.jsx)(n.em,{children:"n"})]})," and ",(0,o.jsxs)(n.em,{children:["tput setab ",(0,o.jsx)(n.em,{children:"n"})]})," commands set the\nforeground and background text colours, respectively. To see the\navailable colours, this script can be used:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'#!/usr/bin/bash\nfor\xa0((C=0;\xa0C<16;\xa0C++))\ndo\n\xa0\xa0tput\xa0setaf\xa0$C\xa0\xa0\xa0#\xa0Set\xa0foreground\xa0to\xa0colour\xa0$C\n\xa0\xa0echo\xa0"Colour\xa0$C"\ndone\ntput\xa0sgr0\xa0\xa0\xa0#\xa0Reset\xa0to\xa0"normal"\xa0text\xa0mode\n'})}),"\n",(0,o.jsx)(n.h2,{id:"number-guessing-game",children:"Number-Guessing Game"}),"\n",(0,o.jsx)(n.p,{children:"This is the main example from the lecture. Study this code and\nensure that you understand what it does (tip: test it, and alter it to see\nwhat effect your changes have):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'#!/usr/bin/bash\n\nMAX=100\xa0\xa0\xa0\xa0\xa0\xa0\xa0#\xa0Maximum\xa0value\xa0of\xa0secret\nMAX_TRIES=7\xa0\xa0\xa0#\xa0Maximum\xa0number\xa0of\xa0tries\xa0(guesses)\nGAMES=0\xa0\xa0\xa0\xa0\xa0\xa0\xa0#\xa0How\xa0many\xa0games\xa0have\xa0been\xa0played\nWINS=0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0#\xa0How\xa0many\xa0games\xa0the\xa0user\xa0has\xa0won\n\nclear\xa0\xa0\xa0\xa0\xa0#\xa0Clear\xa0the\xa0screen\ntput\xa0setaf\xa05\xa0\xa0#\xa0Select\xa0purple\xa0text\necho\xa0"===\xa0Number-Guessing\xa0Game\xa0==="\necho\necho\xa0"I\xa0have\xa0a\xa0secret\xa0number\xa0between\xa01\xa0and\xa0$MAX"\necho\xa0"Your\xa0mission\xa0is\xa0to\xa0guess\xa0it\xa0in\xa0as\xa0few\xa0tries\xa0as\xa0possible."\necho\xa0"You\xa0have\xa0a\xa0maximum\xa0of\xa0$MAX_TRIES\xa0guesses\xa0to\xa0succeed."\necho\n\nPLAY="Y"\n#\xa0This\xa0next\xa0loop\xa0continues\xa0until\xa0the\xa0user\xa0says\n#\xa0they\xa0don\'t\xa0want\xa0to\xa0play\xa0again\nwhile\xa0[[\xa0"$PLAY"\xa0==\xa0"Y"\xa0||\xa0"$PLAY"\xa0==\xa0"y"\xa0||\xa0"$PLAY"\xa0==\xa0"YES"\xa0||\n\xa0\xa0\xa0\xa0\xa0"$PLAY"\xa0==\xa0"Yes"\xa0||\xa0"$PLAY"\xa0==\xa0"yes"\xa0]]\ndo\n\xa0\xa0\xa0\xa0\xa0\xa0#\xa0Generate\xa0a\xa0random\xa0number\xa0from\xa01-MAX\n\xa0\xa0SECRET=$((\xa0RANDOM\xa0%\xa0MAX\xa0+\xa01\xa0))\xa0\xa0\n\n\xa0\xa0\xa0\xa0\xa0\xa0#\xa0Un-comment\xa0this\xa0line\xa0when\xa0debugging!\n\xa0\xa0\xa0\xa0\xa0\xa0#\xa0echo\xa0"NOTE:\xa0the\xa0secret\xa0number\xa0is\xa0$SECRET"\n\n\xa0\xa0GUESS=0\n\xa0\xa0TRIES=0\n\xa0\xa0((GAMES++))\n\n\xa0\xa0#\xa0This\xa0next\xa0loop\xa0continues\xa0until\xa0the\xa0user\xa0guess\xa0correctly\n\xa0\xa0#\xa0or\xa0the\xa0maximum\xa0number\xa0of\xa0guesses\xa0is\xa0exhausted\n\xa0\xa0until\xa0`[`| $TRIES -ge $MAX_TRIES `]($GUESS_-eq_$SECRET "wikilink")\\\n\xa0\xa0do\n\xa0\xa0\xa0\xa0\xa0\xa0tput\xa0setaf\xa015\xa0\xa0\xa0#\xa0White\xa0text\n\xa0\xa0\xa0\xa0\xa0\xa0read\xa0-p\xa0"Enter\xa0your\xa0guess\xa0(#$((++TRIES))):\xa0"\xa0GUESS\n\xa0\xa0\xa0\xa0\xa0\xa0if\xa0`[`$GUESS -gt $SECRET`]($GUESS_-gt_$SECRET "wikilink")\\\n\xa0\xa0\xa0\xa0\xa0\xa0then\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0tput\xa0setaf\xa01\xa0\xa0\xa0\xa0#\xa0Red\xa0text\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0echo\xa0"Too\xa0high!"\n\xa0\xa0\xa0\xa0\xa0\xa0elif\xa0`[`$GUESS -lt $SECRET`]($GUESS_-lt_$SECRET "wikilink")\\\n\xa0\xa0\xa0\xa0\xa0\xa0then\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0tput\xa0setaf\xa01\xa0\xa0\xa0\xa0#\xa0Red\xa0text\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0echo\xa0"Too\xa0low!"\n\xa0\xa0\xa0\xa0\xa0\xa0else\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0tput\xa0setaf\xa010\xa0\xa0\xa0#\xa0Green\xa0text\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0echo\xa0"You\xa0got\xa0it\xa0in\xa0$((TRIES))\xa0tries!"\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0((WINS++))\n\xa0\xa0\xa0\xa0\xa0\xa0fi\n\xa0\xa0\xa0\xa0\xa0\xa0echo\n\xa0\xa0done\n\xa0\xa0if\xa0`[`! $GUESS -eq $SECRET`](!_$GUESS_-eq_$SECRET "wikilink")\\\n\xa0\xa0then\n\xa0\xa0\xa0\xa0\xa0\xa0tput\xa0setaf\xa011\xa0\xa0\xa0#\xa0Yellow\xa0text\n\xa0\xa0\xa0\xa0\xa0\xa0echo\xa0"You\xa0lose\xa0after\xa0$TRIES\xa0attempts.\xa0The\xa0number\xa0was\xa0$SECRET.\xa0"\n\xa0\xa0fi\n\n\xa0\xa0tput\xa0setaf\xa015\xa0\xa0\xa0#\xa0White\xa0texxt\n\xa0\xa0echo\xa0\n\xa0\xa0read\xa0-p\xa0"Do\xa0you\xa0want\xa0to\xa0play\xa0again\xa0(Y/N)?\xa0"\xa0PLAY\n\xa0\xa0echo\n\ndone\ntput\xa0setaf\xa05\xa0\xa0#\xa0Purple\xa0text\n\n#\xa0In\xa0the\xa0next\xa0line,\xa0the\xa0multiplication\xa0\n#\xa0must\xa0preceed\xa0the\xa0division\xa0because\xa0\n#\xa0this\xa0is\xa0integer\xa0math\necho\xa0"You\xa0executed\xa0$GAMES\xa0missions\xa0and\xa0succeeded\xa0$WINS\xa0times\xa0($((WINS*100/GAMES))%\xa0success)."\n\necho\ntput\xa0sgr0\xa0#\xa0Reset\xa0to\xa0normal\xa0text\n'})})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(6540);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);